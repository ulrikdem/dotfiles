font_size 10
# With the styles chosen by default, regular and bold text are hard to distinguish
font_family family="JetBrains Mono NL" style=Light
bold_font family="JetBrains Mono NL" style=Bold
italic_font family="JetBrains Mono NL" style=LightItalic
bold_italic_font family="JetBrains Mono NL" style=BoldItalic

cursor_blink_interval 0
mouse_hide_wait 0
enable_audio_bell no

url_style straight
# By default, a trailing ) is only stripped when the URL is directly preceded by (
url_excluded_characters ()

remember_window_size no

confirm_os_window_close 0
close_on_child_death yes

shell_integration disabled

# kitty provides a terminfo entry for 'xterm-kitty', but ncurses has a more widely-available one for 'kitty'
term kitty
terminfo_type none

scrollback_lines -1

clear_all_shortcuts yes

map ctrl+enter new_os_window_with_cwd
map ctrl+backspace send_key ctrl+w
map ctrl+shift+r load_config_file
map ctrl+: kitty_shell os_window

map ctrl+- change_font_size current -1
map ctrl++ change_font_size current +1
map ctrl+= change_font_size current 0

map ctrl+shift+up scroll_line_up
map ctrl+shift+down scroll_line_down
map ctrl+shift+page_up scroll_page_up
map ctrl+shift+page_down scroll_page_down
map ctrl+shift+[ scroll_to_prompt -1
map ctrl+shift+] scroll_to_prompt 1
map ctrl+shift+home scroll_home
map ctrl+shift+end scroll_end
map ctrl+shift+z>b scroll_prompt_to_bottom
map ctrl+shift+z>t scroll_prompt_to_top
map ctrl+shift+z>ctrl+shift+b scroll_prompt_to_bottom
map ctrl+shift+z>ctrl+shift+t scroll_prompt_to_top

# The following mappings use a verb-object model
# Verbs: [p]ut or show in [p]ager, [o]pen, [y]ank to primary selection, [c]opy to clipboard
# Objects: [s]election, [c]lipboard, [o]utput of last command, [O]utput of last visited command, [a]ll output,
#          [u]rl, h[y]perlink, [p]ath, path with line [n]umber, [h]ash, [i]p address, [w]ord, [l]ine

# The first character is never used in a leading position, like 0
action_alias hints kitten hints --alphabet xntesiroahdufyw
# We use a custom regex instead of --type url, because the default doesn't handle trailing characters well, and to match DOI and arXiv identifiers without ://
# kitty uses dlclark/regexp2 in RE2 mode, so these character classes only match ASCII (but \pX or \p{Xyz} are available for Unicode categories, properties and scripts)
action_alias hints_url hints --type regex --regex '((file:/|https?://|doi:10\.)[[:graph:]-["<>\\^`{|}]]*[[:word:]#-&*+\-/=@~]|ar[Xx]iv:(\d+\.|[a-zA-Z.-]+/)\d+(v\d+)?)'
action_alias hints_overlay hints --program 'launch --type overlay-main --cwd current xdg-open'
action_alias launch_overlay launch --type overlay-main --cwd current

map ctrl+shift+p>s paste_from_selection
map ctrl+shift+p>c paste_from_clipboard
map ctrl+shift+p>o show_last_command_output
map ctrl+shift+p>shift+o show_last_visited_command_output
map ctrl+shift+p>a show_scrollback
map ctrl+shift+p>u hints_url --program -
map ctrl+shift+p>y hints --program - --type hyperlink
map ctrl+shift+p>p hints --program - --type path
map ctrl+shift+p>n hints --program - --type linenum {path}:{line}
map ctrl+shift+p>h hints --program - --type hash
map ctrl+shift+p>i hints --program - --type ip
map ctrl+shift+p>w hints --program - --type word
map ctrl+shift+p>l hints --program - --type line

map ctrl+shift+o>s launch_overlay --stdin-source @selection nvim
map ctrl+shift+o>c launch_overlay sh -c 'xsel -ob | nvim'
map ctrl+shift+o>o launch_overlay --stdin-source @last_cmd_output nvim
map ctrl+shift+o>shift+o launch_overlay --stdin-source @last_visited_cmd_output nvim
map ctrl+shift+o>a launch_overlay --stdin-source @screen_scrollback nvim
map ctrl+shift+o>u hints_url
map ctrl+shift+o>y hints --type hyperlink
map ctrl+shift+o>p hints_overlay --type path
map ctrl+shift+o>n hints_overlay --type linenum
map ctrl+shift+o>h hints_overlay --type hash
map ctrl+shift+o>i hints_overlay --type ip
map ctrl+shift+o>w hints_overlay --type word
map ctrl+shift+o>l hints_overlay --type line

map ctrl+shift+y>s launch --type primary --stdin-source @selection
map ctrl+shift+y>c launch --type background sh -c 'xsel -ob | xsel -i'
map ctrl+shift+y>o launch --type primary --stdin-source @last_cmd_output
map ctrl+shift+y>shift+o launch --type primary --stdin-source @last_visited_cmd_output
map ctrl+shift+y>a launch --type primary --stdin-source @screen_scrollback
map ctrl+shift+y>u hints_url --program *
map ctrl+shift+y>y hints --program * --type hyperlink
map ctrl+shift+y>p hints --program * --type path
map ctrl+shift+y>n hints --program * --type linenum {path}:{line}
map ctrl+shift+y>h hints --program * --type hash
map ctrl+shift+y>i hints --program * --type ip
map ctrl+shift+y>w hints --program * --type word
map ctrl+shift+y>l hints --program * --type line

map ctrl+shift+c>s copy_to_clipboard
map ctrl+shift+c>c discard_event
map ctrl+shift+c>o launch --type clipboard --stdin-source @last_cmd_output
map ctrl+shift+c>shift+o launch --type clipboard --stdin-source @last_visited_cmd_output
map ctrl+shift+c>a launch --type clipboard --stdin-source @screen_scrollback
map ctrl+shift+c>u hints_url --program @
map ctrl+shift+c>y hints --program @ --type hyperlink
map ctrl+shift+c>p hints --program @ --type path
map ctrl+shift+c>n hints --program @ --type linenum {path}:{line}
map ctrl+shift+c>h hints --program @ --type hash
map ctrl+shift+c>i hints --program @ --type ip
map ctrl+shift+c>l hints --program @ --type line
map ctrl+shift+c>w hints --program @ --type word

# This is redundant with ctrl+shift+p>c, but needed for the unicode-input script
map shift+insert paste_from_clipboard

mouse_map ctrl+shift+alt+right press ungrabbed mouse_select_command_output
