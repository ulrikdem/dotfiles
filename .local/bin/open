#!/bin/bash

text=()
for file; do
    if [[ $(file -Lb --mime-type -- "$file") =~ (^text/|^inode/x-empty$|^application/json$) ]]; then
        text+=("$file")
    else
        xdg-open "$file" &>/dev/null &
    fi
done

if ((${#text[@]})); then
    exec nvim -- "${text[@]}"
fi
